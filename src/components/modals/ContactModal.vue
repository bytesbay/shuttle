<template>
  <transition name="modal-fade-scale">
    <app-modal class="contact-modal" v-if="$root.modal_contact_opened" @close="close">
      <transition-group 
        @enter="onEnter" 
        :css="false"
        appear
        class="items"
        tag="div"
      >
        <div 
          key="mail" 
          data-index="0" 
          @click="goTo(0.3)" 
          class="item"
        >
          <div class="icon">
            <svg width="264" height="198" viewBox="0 0 264 198" xmlns="http://www.w3.org/2000/svg">
              <path d="M220 0H44C19.8 0 0 19.8 0 44V154C0 178.2 19.8 198 44 198H220C244.2 198 264 178.2 264 154V44C264 19.8 244.2 0 220 0ZM237.6 63.8L150.7 122.1C145.2 125.4 138.6 127.6 132 127.6C125.4 127.6 118.8 125.4 113.3 122.1L26.4 63.8C22 60.5 20.9 53.9 24.2 48.4C27.5 44 34.1 42.9 39.6 46.2L126.5 104.5C129.8 106.7 135.3 106.7 138.6 104.5L225.5 46.2C231 42.9 237.6 44 240.9 49.5C243.1 53.9 242 60.5 237.6 63.8Z"/>
            </svg>
          </div>
          <a 
            class="text"
            href="mailto:contact@shuttle.software" 
            data-text="contact@shuttle.software"
          ></a>
        </div>
        <div 
          key="insta" 
          data-index="1" 
          class="item"
        >
          <div class="icon">
            <svg width="208" height="208" viewBox="0 0 208 208" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M104 0C75.7553 0 72.2136 0.11972 61.1209 0.625848C50.0513 1.13115 42.4912 2.88897 35.8756 5.46007C29.0367 8.11786 23.2369 11.674 17.4552 17.4556C11.6736 23.2373 8.11745 29.0371 5.45966 35.876C2.88856 42.4912 1.13074 50.0513 0.625435 61.1209C0.119307 72.2136 0 75.7553 0 104C0 132.245 0.119307 135.786 0.625435 146.879C1.13074 157.949 2.88856 165.509 5.45966 172.124C8.11745 178.963 11.6736 184.763 17.4552 190.545C23.2369 196.326 29.0367 199.883 35.8756 202.54C42.4912 205.111 50.0513 206.869 61.1209 207.374C72.2136 207.88 75.7553 208 104 208C132.245 208 135.786 207.88 146.879 207.374C157.949 206.869 165.509 205.111 172.124 202.54C178.963 199.883 184.763 196.326 190.545 190.545C196.326 184.763 199.883 178.963 202.54 172.124C205.111 165.509 206.869 157.949 207.374 146.879C207.88 135.786 208 132.245 208 104C208 75.7553 207.88 72.2136 207.374 61.1209C206.869 50.0513 205.111 42.4912 202.54 35.876C199.883 29.0371 196.326 23.2373 190.545 17.4556C184.763 11.674 178.963 8.11786 172.124 5.46007C165.509 2.88897 157.949 1.13115 146.879 0.625848C135.786 0.11972 132.245 0 104 0ZM104 18.7391C131.769 18.7391 135.059 18.8448 146.025 19.3452C156.165 19.8079 161.672 21.5022 165.336 22.926C170.191 24.8127 173.655 27.0667 177.294 30.7058C180.934 34.3449 183.187 37.8097 185.074 42.6638C186.498 46.3285 188.192 51.8352 188.655 61.9751C189.155 72.9415 189.261 76.2309 189.261 104C189.261 131.769 189.155 135.059 188.655 146.025C188.192 156.165 186.498 161.672 185.074 165.336C183.187 170.191 180.934 173.655 177.294 177.294C173.655 180.934 170.191 183.187 165.336 185.074C161.672 186.498 156.165 188.192 146.025 188.655C135.06 189.155 131.771 189.261 104 189.261C76.2288 189.261 72.9402 189.155 61.9751 188.655C51.8352 188.192 46.3285 186.498 42.6638 185.074C37.8093 183.187 34.3449 180.934 30.7054 177.294C27.0663 173.655 24.8122 170.191 22.926 165.336C21.5018 161.672 19.8075 156.165 19.3447 146.025C18.8444 135.059 18.7387 131.769 18.7387 104C18.7387 76.2309 18.8444 72.9415 19.3447 61.9751C19.8075 51.8352 21.5018 46.3285 22.926 42.6638C24.8122 37.8097 27.0663 34.3449 30.7054 30.7058C34.3449 27.0667 37.8093 24.8127 42.6638 22.926C46.3285 21.5022 51.8352 19.8079 61.9751 19.3452C72.9415 18.8448 76.2309 18.7391 104 18.7391Z"/>
              <path d="M104 138.667C84.854 138.667 69.3333 123.146 69.3333 104C69.3333 84.854 84.854 69.3333 104 69.3333C123.146 69.3333 138.667 84.854 138.667 104C138.667 123.146 123.146 138.667 104 138.667ZM104 50.5946C74.5048 50.5946 50.5946 74.5048 50.5946 104C50.5946 133.495 74.5048 157.405 104 157.405C133.495 157.405 157.405 133.495 157.405 104C157.405 74.5048 133.495 50.5946 104 50.5946Z"/>
              <path d="M171.996 48.4847C171.996 55.3772 166.408 60.9645 159.515 60.9645C152.623 60.9645 147.036 55.3772 147.036 48.4847C147.036 41.5921 152.623 36.0048 159.515 36.0048C166.408 36.0048 171.996 41.5921 171.996 48.4847Z"/>
            </svg>
          </div>
          <a
            class="text"
            href="https://instagram.com/shuttle.software"
            data-text="Instagram"
          ></a>
        </div>
        <div 
          key="discord" 
          data-index="2" 
          class="item"
        >
          <div class="icon">
            <svg width="253" height="182" viewBox="0 0 253 182" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M221.808 22.7517C190.616 -0.647497 160.941 0.001795 160.941 0.001795L157.908 3.4693C194.732 14.7352 211.845 30.9853 211.845 30.9853C160.39 2.77738 99.9477 2.77342 50.0363 24.7025C42.0208 28.3851 37.2559 30.9853 37.2559 30.9853C37.2559 30.9853 55.2353 13.8688 94.2255 2.60291L92.0601 0.001795C92.0601 0.001795 62.3836 -0.647497 31.1918 22.7517C31.1918 22.7517 0 79.3013 0 149.067C0 149.067 18.1964 180.482 66.0653 182C66.0653 182 74.0808 172.252 80.579 164.016C53.0689 155.783 42.6729 138.452 42.6729 138.452C45.8591 140.68 51.1136 143.575 51.5536 143.867C88.1148 164.349 140.048 171.058 186.719 151.451C194.298 148.634 202.748 144.517 211.628 138.667C211.628 138.667 200.797 156.435 172.421 164.45C178.921 172.683 186.719 181.999 186.719 181.999C234.59 180.482 253 149.066 253 149.066C253 79.3013 221.808 22.7517 221.808 22.7517ZM85.994 128.918C73.8637 128.918 63.8989 118.085 63.8989 104.867C63.8989 91.6507 73.6467 80.818 85.994 80.818C98.3403 80.818 108.305 91.6507 108.088 104.867C108.088 118.085 98.3403 128.918 85.994 128.918ZM165.057 128.918C152.927 128.918 142.963 118.085 142.963 104.867C142.963 91.6507 152.71 80.818 165.057 80.818C177.404 80.818 187.152 91.6507 187.152 104.867C187.152 118.085 177.404 128.918 165.057 128.918Z"/>
            </svg>
          </div>
          <a 
            class="text"
            href="https://discord.gg/fa7MeXeW" 
            data-text="Discord"
          ></a>
        </div>
        <div 
          key="geo" 
          data-index="3" 
          class="item"
        >
          <div class="icon">
            <svg width="122" height="166" viewBox="0 0 122 166" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M60.9975 0.0224609C27.3651 0.0224609 0 27.3875 0 61.0233C0 69.7968 1.79574 78.1735 5.33465 85.9229C20.5857 119.296 49.8262 154.531 58.4268 164.533C59.0712 165.281 60.0106 165.712 60.9992 165.712C61.9877 165.712 62.9272 165.281 63.5715 164.533C72.1687 154.532 101.409 119.299 116.665 85.9229C120.206 78.1735 122 69.7968 122 61.0233C121.997 27.3875 94.6315 0.0224609 60.9975 0.0224609ZM60.9975 92.7073C43.5267 92.7073 29.3117 78.4923 29.3117 61.0216C29.3117 43.5492 43.5267 29.3342 60.9975 29.3342C78.4682 29.3342 92.6832 43.5492 92.6832 61.0216C92.6849 78.4923 78.4699 92.7073 60.9975 92.7073Z"/>
            </svg>
          </div>
          <span
            class="text"
            data-text="Santa Clarita CA, USA"
          ></span>
        </div>
      </transition-group>
    </app-modal>
  </transition>
</template>

<script>
import Typewriter from 'typewriter-effect/dist/core';
export default {
  methods: {

    close() {
      this.$root.modal_contact_opened = false;
    },

    onEnter(el, done) {
      const delay = el.dataset.index * 300
      setTimeout(() => {
        const tw = new Typewriter(el.childNodes[1], {
          strings: el.childNodes[1].dataset.text,
          autoStart: true,
          cursor: null,
          delay: 30,
        });
        tw.callFunction(done).start();
      }, delay)
    }
  }
}
</script>

<style lang="scss" scoped>

.contact-modal {
  .items {
    display: flex;
    flex-direction: column;
    align-items: stretch;

    width: 100%;
    max-width: 400px;
  }

  .item {
    color: #f5f5f5;
    background: #0e0e0e;
    border: 0;
    appearance: none;
    font-size: 16px;
    font-family: 'Fira Mono';
    font-weight: normal;
    height: 100%;
    margin-bottom: 2px;

    display: flex;
    flex-direction: row;
    align-items: stretch;
    justify-content: center;

    .icon {
      display: flex;
      align-items: center;
      justify-content: center;

      height: 100%;
      min-width: 60px;
      padding: 20px 0;
      border-right: 2px solid #000;

      svg {
        height: 20px;
        max-width: 20px;
        width: auto;
        fill: #f5f5f5;
      }
    }

    .text {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      flex-grow: 1;

      height: 100%;
      text-decoration: none;
      color: #fff;
      padding: 20px 0;
      padding-left: 20px;
      
    }
  }
}

</style>